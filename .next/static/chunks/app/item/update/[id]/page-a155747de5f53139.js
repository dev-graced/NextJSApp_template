(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[543],{5574:function(e,t,a){Promise.resolve().then(a.bind(a,131))},131:function(e,t,a){"use strict";a.r(t);var n=a(7437),i=a(2265),r=a(6463),s=a(7796);t.default=e=>{let[t,a]=(0,i.useState)(""),[o,c]=(0,i.useState)(""),[l,p]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[d,g]=(0,i.useState)(""),m=(0,r.useRouter)(),f=(0,s.Z)();(0,i.useEffect)(()=>{(async e=>{let t=await fetch("".concat("https://pt-info-app.vercel.app","/api/item/readsingle/").concat(e),{cache:"no-store"}),n=(await t.json()).singleItem;a(n.title),c(n.price),p(n.image),h(n.description),g(n.email)})(e.params.id)},[e]);let v=async a=>{a.preventDefault();try{let a=await fetch("".concat("https://pt-info-app.vercel.app","/api/item/update/").concat(e.params.id),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({title:t,image:l,price:o,description:u,email:f})}),n=await a.json();alert(n.message),m.push("/"),m.refresh()}catch(e){console.log("アイテム編集が失敗しました")}};if(f)return f===d?(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"page-title",children:"アイテム編集"}),(0,n.jsxs)("form",{onSubmit:v,children:[(0,n.jsx)("input",{value:t,onChange:e=>a(e.target.value),type:"text",name:"title",placeholder:"アイテム名",required:!0}),(0,n.jsx)("input",{value:o,onChange:e=>c(e.target.value),type:"text",name:"price",placeholder:"価格",required:!0}),(0,n.jsx)("input",{value:l,onChange:e=>p(e.target.value),type:"text",name:"image",placeholder:"画像",required:!0}),(0,n.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),name:"description",placeholder:"商品説明",required:!0}),(0,n.jsx)("button",{children:"編集"})]})]}):(0,n.jsx)("h1",{children:"権限がありません"})}},7796:function(e,t,a){"use strict";var n=a(808),i=a(6463),r=a(2265);t.Z=()=>{let[e,t]=(0,r.useState)(""),a=(0,i.useRouter)();return(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");e||a.push("/user/login");try{let a=new TextEncoder().encode("ptInfoApp-book"),i=await (0,n._)(e,a);t(i.payload.email)}catch(e){a.push("/user/login")}})()},[a]),e}}},function(e){e.O(0,[146,971,23,744],function(){return e(e.s=5574)}),_N_E=e.O()}]);