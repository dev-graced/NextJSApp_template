(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{7289:function(e,t,n){Promise.resolve().then(n.bind(n,5511))},5511:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(7437),i=n(2265),r=n(6463),o=n(5601),s=n.n(o),c=n(7796),l=e=>{let[t,n]=(0,i.useState)(""),[o,l]=(0,i.useState)(""),[u,p]=(0,i.useState)(""),[d,f]=(0,i.useState)(""),[h,m]=(0,i.useState)(""),g=(0,r.useRouter)(),j=(0,c.Z)();(0,i.useEffect)(()=>{(async e=>{let t=await fetch("".concat("https://pt-info-app.vercel.app","/api/item/readsingle/").concat(e),{cache:"no-store"}),a=(await t.json()).singleItem;n(a.title),l(a.price),p(a.image),f(a.description),m(a.email)})(e.params.id)},[e]);let y=async t=>{t.preventDefault();try{let t=await fetch("".concat("https://pt-info-app.vercel.app","/api/item/delete/").concat(e.params.id),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({email:j})}),n=await t.json();alert(n.message),g.push("/"),g.refresh()}catch(e){console.log("アイテムの削除が失敗しました")}};if(j)return j===h?(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"page-title",children:"アイテム削除"}),(0,a.jsxs)("form",{onSubmit:y,children:[(0,a.jsx)(s(),{src:u,width:750,height:500,alt:t,priority:!0}),(0,a.jsx)("h1",{children:t}),(0,a.jsx)("h2",{children:o}),(0,a.jsx)("p",{children:d}),(0,a.jsx)("button",{children:"削除"})]})]}):(0,a.jsx)("h1",{children:"権限がありません"})}},7796:function(e,t,n){"use strict";var a=n(808),i=n(6463),r=n(2265);t.Z=()=>{let[e,t]=(0,r.useState)(""),n=(0,i.useRouter)();return(0,r.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");e||n.push("/user/login");try{let n=new TextEncoder().encode("ptInfoApp-book"),i=await (0,a._)(e,n);t(i.payload.email)}catch(e){n.push("/user/login")}})()},[n]),e}},5601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return c},getImageProps:function(){return s}});let a=n(9920),i=n(497),r=n(8173),o=a._(n(1241));function s(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let c=r.Image}},function(e){e.O(0,[173,146,971,23,744],function(){return e(e.s=7289)}),_N_E=e.O()}]);